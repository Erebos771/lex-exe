%{
#include "exp.tab.h"
#include <stdlib.h>
%}

%%

x              { return ID; }
[0-9]+         { yylval.ival = atoi(yytext); return NUM; }
[+\-*/()]      { return yytext[0]; }
[ \t\n]+       ;
.              { return yytext[0]; }

%%

int yywrap() { return 1; }


%{
#include <stdio.h>
#include <stdlib.h>

int yylex(void);
int yyerror(char *s);

int x_value;     
int result;
%}


%union {
    int ival;
}

%token <ival> NUM
%token ID


%type  <ival> E

%left '+' '-'
%left '*' '/'
%start START
%%
E : E '+' E   { $$ = $1 + $3; }
  | E '-' E   { $$ = $1 - $3; }
  | E '*' E   { $$ = $1 * $3; }
  | E '/' E   { $$ = $1 / $3; }
  | '(' E ')' { $$ = $2; }
  | ID        { $$ = x_value; }   /* replace x with user input */
  | NUM       { $$ = $1; }
  ;

START : E { result = $1; }
%%

int main() {
    printf("Enter value of x: ");
    scanf("%d", &x_value);

    printf("Enter expression: ");
    yyparse();

    printf("Result = %d\n", result);
    return 0;
}

int yyerror(char *s) {
    printf("Invalid Expression\n");
    return 0;
}
